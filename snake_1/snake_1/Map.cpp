#include "Map.h"
#include <ncurses.h>

void Map::loadStage(int stage) {
    mapData = {
        {2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
        {2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2}
    };
}


void Map::render() {
    for (size_t y = 0; y < mapData.size(); ++y){
    	for (size_t x = 0; x < mapData[y].size(); ++x){
            switch(mapData[y][x]) {
                case 0: mvprintw(y, x, " "); break;
                case 1: mvprintw(y, x, "#"); break;          // Wall
                case 2: mvprintw(y, x, "*"); break;          // Immune Wall
                case 3: mvprintw(y, x, "O"); break;          // Snake Head
                case 4: mvprintw(y, x, "o"); break;          // Snake Body
                // 이후 단계: 5(Growth), 6(Poison), 7(Gate) 추가
            }
        }
    }
    refresh();
}
int Map::getValue(int y, int x) {
    if (y < 0 || static_cast<size_t>(y) >= mapData.size()) return -1;
    if (x < 0 || static_cast<size_t>(x) >= mapData[y].size()) return -1;

    return mapData[y][x];
}

